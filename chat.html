<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartCert - Chat</title>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.css" />

    <link rel="icon" type="image/png" href="assets/img/tab_icon.png" />
  </head>
  <body>
    <header class="app-header">
      <div class="app-logo">
        <h1 style="margin: 0;">
          <a href="index.html" style="color: inherit; text-decoration: none;">
            SmartCert
          </a>
        </h1>
      </div>
      <div id="topRightContainer" class="pill-container">
        <button id="loginBtn" class="login-button hidden">Login/Signup</button>

        <img
          id="profilePic"
          class="profile-pic hidden"
          src="assets/img/pfp.avif"
          alt="Profile"
        />

        <img
          id="modeIcon"
          class="mode-icon"
          src="assets/img/dark.png"
          alt="Toggle Theme"
        />
      </div>
    </header>

    <div class="main-content">
      <section id="chatSection" class="chat-container">
        <div class="topic-selector" id="topicSelector">
          <h3>Choose a topic to give Certi some context</h3>
          <div id="unitContainer" class="unit-container">
            <button class="unit-button unit-green" data-unit="A">
              Unit 1: The Study of Life
            </button>
            <button class="unit-button unit-purple" data-unit="B">
              Unit 2: The Cell
            </button>
            <button class="unit-button unit-red" data-unit="C">
              Unit 3: The Organism
            </button>
          </div>

          <div id="chapterContainer" class="chapter-container hidden"></div>

          <div
            id="selectedTopicContainer"
            class="selected-topic-container hidden"
          >
            <span id="selectedTopicLabel" class="selected-topic-label"></span>
            <button id="changeTopicBtn" class="change-topic-button">
              Change Topic
            </button>
          </div>
        </div>

        <div class="chat-messages" id="chatMessages">
          <div class="chat-message message-bot overlay-row">
            <div class="bubble-container">
              <img
                class="chat-avatar"
                src="assets/img/certi.png"
                alt="Bot Avatar"
              />
              <div class="chat-bubble">
                Hi there, I'm Certi, your personal Leaving Cert biology tutor!
              </div>
            </div>
          </div>
        </div>

        <div class="chat-input-area">
          <input
            type="text"
            id="chatInput"
            placeholder="Ask a Biology question..."
          />
          <button id="sendBtn">Send</button>
        </div>
      </section>
      </div>

    <script type="module" src="js/script.js"></script>
    <script type="module" src="js/chat.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/marked@4.3.